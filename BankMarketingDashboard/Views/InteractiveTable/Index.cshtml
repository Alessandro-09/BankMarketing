@model List<BankMarketingDashboard.Models.CampaignRecord>

@{
    ViewData["Title"] = "Interactive Table";
}

<div class="dashboard-container">
    <h2>Interactive Data Table</h2>

    <div class="chart-container">
        <div class="table-responsive">
            <table class="table table-dark table-striped table-hover">
                <thead>
                    <tr>
                        <th>Age</th>
                        <th>Job</th>
                        <th>Marital</th>
                        <th>Education</th>
                        <th>Default</th>
                        <th>Housing</th>
                        <th>Loan</th>
                        <th>Contact</th>
                        <th>Month</th>
                        <th>Duration</th>
                        <th>Campaign</th>
                        <th>PDays</th>
                        <th>Previous</th>
                        <th>Poutcome</th>
                        <th>Emp. Var. Rate</th>
                        <th>Cons. Price Idx</th>
                        <th>Cons. Conf. Idx</th>
                        <th>Euribor 3M</th>
                        <th>Nr. Employed</th>
                        <th>Subscribed?</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var record in Model)
                    {
                        <tr>
                            <td>@record.Age</td>
                            <td>@record.Job</td>
                            <td>@record.Marital</td>
                            <td>@record.Education</td>
                            <td>@record.Default</td>
                            <td>@record.Housing</td>
                            <td>@record.Loan</td>
                            <td>@record.Contact</td>
                            <td>@record.Month</td>
                            <td>@record.Duration</td>
                            <td>@record.Campaign</td>
                            <td>@record.Pdays</td>
                            <td>@record.Previous</td>
                            <td>@record.Poutcome</td>
                            <td>@record.EmpVarRate.ToString("F2")</td>
                            <td>@record.ConsPriceIdx.ToString("F3")</td>
                            <td>@record.ConsConfIdx.ToString("F1")</td>
                            <td>@record.Euribor3m.ToString("F3")</td>
                            <td>@record.NrEmployed.ToString("F1")</td>
                            <td>@(record.Y == "yes" ? "Yes" : "No")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Botones de exportación (NO FUNCIONALES) -->
        <div class="mt-3">
            <a href="#" class="btn btn-outline-light btn-sm">📥 Export to CSV</a>
            <a href="#" class="btn btn-outline-light btn-sm">📄 Export to Excel</a>
        </div>
    </div>

    <!-- Paginación -->
    <div class="d-flex justify-content-center mt-4">
        <nav>
            <ul class="pagination">
                <!-- Botón "Anterior" -->
                @if (ViewBag.CurrentPage > 1)
                {
                    <li class="page-item">
                        <a class="page-link text-white bg-dark" href="@Url.Action("Index", new { page = ViewBag.CurrentPage - 1 })">Anterior</a>
                    </li>
                }

                <!-- Páginas muestra 5 a la vez) -->
                @{
                    var startPage = Math.Max(1, ViewBag.CurrentPage - 2);
                    var endPage = Math.Min(ViewBag.TotalPages, startPage + 4);
                    if (endPage - startPage < 4 && ViewBag.TotalPages > 5)
                    {
                        startPage = Math.Max(1, endPage - 4);
                    }
                }

                @for (int i = startPage; i <= endPage; i++)
                {
                    <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                        <a class="page-link text-white bg-dark @(i == ViewBag.CurrentPage ? "bg-purple" : "")"
                           href="@Url.Action("Index", new { page = i })">@i</a>
                    </li>
                }

                <!-- Botón "Siguiente" -->
                @if (ViewBag.CurrentPage < ViewBag.TotalPages)
                {
                    <li class="page-item">
                        <a class="page-link text-white bg-dark" href="@Url.Action("Index", new { page = ViewBag.CurrentPage + 1 })">Siguiente</a>
                    </li>
                }
            </ul>
        </nav>
    </div>

    <style>
        .pagination .active .page-link {
            background-color: #CB3CFF !important;
            border-color: #CB3CFF !important;
        }
        .page-link {
            color: #ddd !important;
            background-color: #121228 !important;
            border: 1px solid #1a1a33 !important;
        }
        .page-link:hover {
            background-color: #1a1a33 !important;
        }
    </style>
</div>